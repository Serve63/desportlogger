<!doctype html>
<html lang="nl">
<head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="theme-color" content="#1f2126" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
 <title>Logboek - Zondag</title> 
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Sora:wght@400;500;600&display=swap");

    :root {
      --paper: #2a2c30;
      --ink: #eef0f3;
      --muted: #c2c6cc;
      --line: #6a6f78;
      --stroke: #7a8089;
      --field: #3b3f45;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Sora", system-ui, sans-serif;
      color: var(--ink);
      background: #1f2126;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 24px 12px 48px;
    }

    .sheet {
      width: min(980px, 100%);
      padding: 8px 2px 18px;
      position: relative;
    }

    header {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      text-align: center;
      margin-bottom: 18px;
      position: relative;
      z-index: 1;
    }

    h1 {
      font-family: "Cormorant Garamond", serif;
      font-size: clamp(2.2rem, 3.8vw, 3.4rem);
      margin: 0;
      letter-spacing: 0.02em;
    }

    .training-count {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--muted);
    }

    .year-trigger {
      background: none;
      border: none;
      padding: 0;
      margin: 0;
      font: inherit;
      color: var(--ink);
      font-weight: 700;
      letter-spacing: 0.18em;
      cursor: pointer;
    }

    .day-line {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 6px;
      margin-bottom: 10px;
    }

    .day-trigger {
      background: none;
      border: none;
      padding: 0;
      margin: 0;
      font: inherit;
      color: var(--ink);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      font-size: 0.78rem;
      cursor: pointer;
    }

    .grid {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .header-row {
      display: grid;
      grid-template-columns: 20px minmax(0, 2fr) 42px 42px 42px;
      column-gap: 8px;
      align-items: end;
    }

    .grid .header {
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.5rem;
      letter-spacing: 0.12em;
      color: var(--muted);
      padding-bottom: 6px;
      text-align: center;
    }

    .grid .header.exercise-header {
      text-align: left;
    }

    .grid .header.check-header {
      text-align: center;
    }

    .row {
      display: grid;
      grid-template-columns: 20px minmax(0, 2fr) 42px 42px 42px;
      column-gap: 8px;
      align-items: start;
    }

    .complete-toggle {
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: none;
      background: #2f3338;
      display: inline-grid;
      place-items: center;
      cursor: pointer;
      margin-top: 6px;
    }

    .complete-toggle:checked {
      background: #2ea043;
      border-color: #2ea043;
    }

    .complete-toggle:checked::after {
      content: "";
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #eaffef;
    }

    .exercise-cell {
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 4px;
      min-width: 0;
    }

    .exercise-cell .exercise-name,
    .exercise-cell .exercise-note {
      border: none;
      background: transparent;
      padding: 2px 0;
      color: var(--ink);
      font: inherit;
    }

    .exercise-cell .exercise-note {
      color: #c6c8cc;
      font-size: 0.75rem;
    }
    .exercise-cell .exercise-name {
      font-size: 0.72rem;
      font-weight: 500;
    }


    .mini-wrap {
      width: 100%;
    }

    .mini-field {
      border: none;
      background: var(--field);
      border-radius: 6px;
      width: 42px;
      height: 42px;
      padding: 0;
      text-align: center;
      font-size: 0.75rem;
      color: var(--ink);
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .complete-toggle:checked + .exercise-cell {
      color: #e8f6ec;
    }

    .row .complete-toggle:checked + .exercise-cell .exercise-name,
    .row .complete-toggle:checked + .exercise-cell .exercise-note {
      color: #e8f6ec;
    }

    .row .complete-toggle:checked ~ .mini-wrap .mini-field {
      background: #2f3b35;
      border-color: #3b8f5b;
      color: #e8f6ec;
    }

    input::placeholder {
      color: #b4b7bc;
    }

    .year-modal,
    .day-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(10, 10, 12, 0.45);
      z-index: 1000;
      padding: 24px;
    }

    .year-modal.is-open,
    .day-modal.is-open {
      display: flex;
    }

    .year-modal__content,
    .day-modal__content {
      width: min(420px, 100%);
      background: #3b3f45;
      color: #f1f2f4;
      border-radius: 14px;
      padding: 20px 20px 18px;
      border: 1px solid #b9bcc3;
      box-shadow: 0 14px 28px rgba(0, 0, 0, 0.35);
      position: relative;
    }

    .year-modal__content h2,
    .day-modal__content h2 {
      margin: 0 0 12px;
      font-size: 1.05rem;
    }

    .year-modal__list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 8px;
      font-size: 0.95rem;
    }

    .year-total {
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid #b9bcc3;
    }

    .day-modal__grid {
      display: grid;
      gap: 8px;
    }

    .day-modal__grid a {
      text-decoration: none;
      color: #f1f2f4;
      background: #2f3338;
      border: 1px solid #b9bcc3;
      border-radius: 10px;
      padding: 8px 10px;
      font-weight: 600;
      text-align: center;
    }

    .day-modal__grid a:hover {
      background: #3b3f45;
    }

    .year-modal__close,
    .day-modal__close {
      position: absolute;
      top: 10px;
      right: 12px;
      border: none;
      background: transparent;
      font-size: 1.5rem;
      cursor: pointer;
      color: #f1f2f4;
    }

    @media (max-width: 720px) {
      body {
        padding: 18px 10px 40px;
      }

      header {
        gap: 10px;
        margin-bottom: 18px;
      }

      h1 {
        font-size: clamp(1.9rem, 6.5vw, 2.4rem);
      }

      .training-count {
        font-size: 0.75rem;
        letter-spacing: 0.14em;
      }

      .grid {
        grid-template-columns: 20px minmax(0, 1.4fr) 40px 40px 40px;
        column-gap: 10px;
      }
    }

    @media (max-width: 520px) {
      .grid {
        grid-template-columns: 20px minmax(0, 1fr) 36px 36px 36px;
        column-gap: 8px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .grid {
        animation: none;
      }
    }
  </style>
</head>
<body> <main class="sheet"> <header> <div> <div class="training-count"><button class="year-trigger" type="button">2026:</button> 27 sessies</div> <h1>Serv√©'s Logboek</h1> <div class="day-line"><button class="day-trigger" type="button">Zondag</button></div></div>
</header> <section class="grid" aria-label="Oefeningen"> <div class="header-row"><div class="header check-header"></div> <div class="header exercise-header"></div> <div class="header">SETS</div> <div class="header">REPS</div> <div class="header">KG</div></div> <div class="row"> <input type="checkbox" class="complete-toggle" aria-label="Oefening afvinken" /> <div class="exercise-cell"> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" class="exercise-name" type="text" name="oefening-1" placeholder="Oefening" value="Shoulder Press Machine" /> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" type="text" class="exercise-note" name="note-1" placeholder="Notitie" /></div> <div class="mini-wrap" data-label="Sets"><input type="text" class="mini-field" name="sets-1" placeholder="Sets" data-max="9" inputmode="numeric" pattern="[0-9]*" maxlength="1" value="3" /></div> <div class="mini-wrap" data-label="Reps"><input type="text" class="mini-field" name="reps-1" placeholder="Reps" data-max="30" inputmode="numeric" pattern="[0-9]*" maxlength="2" /></div> <div class="mini-wrap" data-label="Gewicht"><input type="text" class="mini-field" name="gewicht-1" placeholder="KG" data-max="999" inputmode="numeric" pattern="[0-9]*" maxlength="3" /></div></div> <div class="row"> <input type="checkbox" class="complete-toggle" aria-label="Oefening afvinken" /> <div class="exercise-cell"> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" class="exercise-name" type="text" name="oefening-2" placeholder="Oefening" value="Lateral Shoulder Machine" /> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" type="text" class="exercise-note" name="note-2" placeholder="Notitie" /></div> <div class="mini-wrap" data-label="Sets"><input type="text" class="mini-field" name="sets-2" placeholder="Sets" data-max="9" inputmode="numeric" pattern="[0-9]*" maxlength="1" value="3" /></div> <div class="mini-wrap" data-label="Reps"><input type="text" class="mini-field" name="reps-2" placeholder="Reps" data-max="30" inputmode="numeric" pattern="[0-9]*" maxlength="2" /></div> <div class="mini-wrap" data-label="Gewicht"><input type="text" class="mini-field" name="gewicht-2" placeholder="KG" data-max="999" inputmode="numeric" pattern="[0-9]*" maxlength="3" /></div></div> <div class="row"> <input type="checkbox" class="complete-toggle" aria-label="Oefening afvinken" /> <div class="exercise-cell"> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" class="exercise-name" type="text" name="oefening-3" placeholder="Oefening" value="Rear Delt Machine" /> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" type="text" class="exercise-note" name="note-3" placeholder="Notitie" /></div> <div class="mini-wrap" data-label="Sets"><input type="text" class="mini-field" name="sets-3" placeholder="Sets" data-max="9" inputmode="numeric" pattern="[0-9]*" maxlength="1" value="3" /></div> <div class="mini-wrap" data-label="Reps"><input type="text" class="mini-field" name="reps-3" placeholder="Reps" data-max="30" inputmode="numeric" pattern="[0-9]*" maxlength="2" /></div> <div class="mini-wrap" data-label="Gewicht"><input type="text" class="mini-field" name="gewicht-3" placeholder="KG" data-max="999" inputmode="numeric" pattern="[0-9]*" maxlength="3" /></div></div> <div class="row"> <input type="checkbox" class="complete-toggle" aria-label="Oefening afvinken" /> <div class="exercise-cell"> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" class="exercise-name" type="text" name="oefening-4" placeholder="Oefening" value="Shrugs" /> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" type="text" class="exercise-note" name="note-4" placeholder="Notitie" /></div> <div class="mini-wrap" data-label="Sets"><input type="text" class="mini-field" name="sets-4" placeholder="Sets" data-max="9" inputmode="numeric" pattern="[0-9]*" maxlength="1" value="3" /></div> <div class="mini-wrap" data-label="Reps"><input type="text" class="mini-field" name="reps-4" placeholder="Reps" data-max="30" inputmode="numeric" pattern="[0-9]*" maxlength="2" /></div> <div class="mini-wrap" data-label="Gewicht"><input type="text" class="mini-field" name="gewicht-4" placeholder="KG" data-max="999" inputmode="numeric" pattern="[0-9]*" maxlength="3" /></div></div> <div class="row"> <input type="checkbox" class="complete-toggle" aria-label="Oefening afvinken" /> <div class="exercise-cell"> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" class="exercise-name" type="text" name="oefening-5" placeholder="Oefening" value="Calf Raises" /> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" type="text" class="exercise-note" name="note-5" placeholder="Notitie" /></div> <div class="mini-wrap" data-label="Sets"><input type="text" class="mini-field" name="sets-5" placeholder="Sets" data-max="9" inputmode="numeric" pattern="[0-9]*" maxlength="1" value="3" /></div> <div class="mini-wrap" data-label="Reps"><input type="text" class="mini-field" name="reps-5" placeholder="Reps" data-max="30" inputmode="numeric" pattern="[0-9]*" maxlength="2" /></div> <div class="mini-wrap" data-label="Gewicht"><input type="text" class="mini-field" name="gewicht-5" placeholder="KG" data-max="999" inputmode="numeric" pattern="[0-9]*" maxlength="3" /></div></div> <div class="row"> <input type="checkbox" class="complete-toggle" aria-label="Oefening afvinken" /> <div class="exercise-cell"> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" class="exercise-name" type="text" name="oefening-6" placeholder="Oefening" value="Seated Leg Curl" /> <input spellcheck="false" autocapitalize="off" autocomplete="off" autocorrect="off" type="text" class="exercise-note" name="note-6" placeholder="Notitie" /></div> <div class="mini-wrap" data-label="Sets"><input type="text" class="mini-field" name="sets-6" placeholder="Sets" data-max="9" inputmode="numeric" pattern="[0-9]*" maxlength="1" value="3" /></div> <div class="mini-wrap" data-label="Reps"><input type="text" class="mini-field" name="reps-6" placeholder="Reps" data-max="30" inputmode="numeric" pattern="[0-9]*" maxlength="2" /></div> <div class="mini-wrap" data-label="Gewicht"><input type="text" class="mini-field" name="gewicht-6" placeholder="KG" data-max="999" inputmode="numeric" pattern="[0-9]*" maxlength="3" /></div></div></section></main> <div class="year-modal" id="yearModal" aria-hidden="true"> <div class="year-modal__content" role="dialog" aria-modal="true" aria-labelledby="yearModalTitle"> <button class="year-modal__close" type="button" aria-label="Sluiten">&times;</button> <h2 id="yearModalTitle">Voorgaande jaren</h2> <ul class="year-modal__list"> <li><strong>2022:</strong> 10</li> <li><strong>2023:</strong> 5</li> <li><strong>2024:</strong> 40</li> <li><strong>2025:</strong> 280</li> <li><strong>2026 (tot heden):</strong> 27</li> <li class="year-total"><strong>Totaal:</strong> 362 sessies</li></ul></div></div>

  <div class="day-modal" id="dayModal" aria-hidden="true">
    <div class="day-modal__content" role="dialog" aria-modal="true" aria-labelledby="dayModalTitle">
      <button class="day-modal__close" type="button" aria-label="Sluiten">&times;</button>
      <h2 id="dayModalTitle">Kies een dag</h2>
      <div class="day-modal__grid">
        <a href="index.html">Maandag</a>
        <a href="dinsdag.html">Dinsdag</a>
        <a href="woensdag.html">Woensdag</a>
        <a href="donderdag.html">Donderdag</a>
        <a href="zaterdag.html">Zaterdag</a>
        <a href="zondag.html">Zondag</a>
      </div>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    (() => {
      const dayTargets = {
        0: "zondag.html",
        1: "index.html",
        2: "dinsdag.html",
        3: "woensdag.html",
        4: "donderdag.html",
        5: "index.html",
        6: "zaterdag.html",
      };

      const todayTarget = dayTargets[new Date().getDay()];
      if (todayTarget && !window.location.pathname.endsWith(todayTarget)) {
        window.location.replace(todayTarget);
        return;
      }

      const dayTrigger = document.querySelector(".day-trigger");
      const dayModal = document.getElementById("dayModal");
      const dayClose = document.querySelector(".day-modal__close");

      if (dayTrigger && dayModal && dayClose) {
        const openDayModal = () => {
          dayModal.classList.add("is-open");
          dayModal.setAttribute("aria-hidden", "false");
        };
        const closeDayModal = () => {
          dayModal.classList.remove("is-open");
          dayModal.setAttribute("aria-hidden", "true");
        };

        dayTrigger.addEventListener("click", () => {
          if (dayModal.classList.contains("is-open")) {
            closeDayModal();
          } else {
            openDayModal();
          }
        });
        dayClose.addEventListener("click", closeDayModal);
        dayModal.addEventListener("click", (event) => {
          if (event.target === dayModal) closeDayModal();
        });
        document.addEventListener("keydown", (event) => {
          if (event.key === "Escape") closeDayModal();
        });
      }

      const yearTrigger = document.querySelector(".year-trigger");
      const yearModal = document.getElementById("yearModal");
      const yearClose = document.querySelector(".year-modal__close");

      if (yearTrigger && yearModal && yearClose) {
        const openModal = () => {
          yearModal.classList.add("is-open");
          yearModal.setAttribute("aria-hidden", "false");
        };
        const closeModal = () => {
          yearModal.classList.remove("is-open");
          yearModal.setAttribute("aria-hidden", "true");
        };

        yearTrigger.addEventListener("click", () => {
          if (yearModal.classList.contains("is-open")) {
            closeModal();
          } else {
            openModal();
          }
        });
        yearClose.addEventListener("click", closeModal);
        yearModal.addEventListener("click", (event) => {
          if (event.target === yearModal) closeModal();
        });
        document.addEventListener("keydown", (event) => {
          if (event.key === "Escape") closeModal();
        });
      }

      const clampInput = (input) => {
        const max = Number(input.dataset.max || 999);
        input.addEventListener("input", () => {
          let value = input.value.replace(/\D+/g, "");
          if (value === "") {
            input.value = "";
            return;
          }
          const num = Number(value);
          input.value = String(Math.min(num, max));
        });
      };

      document.querySelectorAll("input[data-max]").forEach(clampInput);

      const toggleRowComplete = (row, checked) => {
        if (!row) return;
        row.classList.toggle("completed", checked);
      };

      document.querySelectorAll(".row").forEach((row) => {
        const toggle = row.querySelector(".complete-toggle");
        if (!toggle) return;
        toggleRowComplete(row, toggle.checked);
        toggle.addEventListener("change", () => {
          toggleRowComplete(row, toggle.checked);
        });
      });

      if (!window.supabase) return;

      const supabase = window.supabase.createClient(
        "https://lqgcitosiyahgwqluwtb.supabase.co",
        "sb_publishable_dGMK5ruFsyWkF3ne43AS1A_lHURUBhI"
      );

      const day = document.querySelector(".day-trigger")?.textContent?.trim() ||
        document.querySelector(".day-tag")?.textContent?.trim();
      const rows = Array.from(document.querySelectorAll(".row"));
      if (!day || rows.length === 0) return;

      const getRowData = (row, index) => {
        const nameInput = row.querySelector(".exercise-name");
        const noteInput = row.querySelector(".exercise-note");
        const setsInput = row.querySelector('input[name^="sets-"]');
        const repsInput = row.querySelector('input[name^="reps-"]');
        const weightInput = row.querySelector('input[name^="gewicht-"]');

        const toInt = (value) => {
          if (value === "" || value == null) return null;
          const num = Number(value);
          return Number.isNaN(num) ? null : num;
        };

        return {
          day,
          exercise_index: index + 1,
          exercise_name: nameInput?.value?.trim() || null,
          note: noteInput?.value?.trim() || null,
          completed: row.querySelector(".complete-toggle")?.checked || false,
          sets: toInt(setsInput?.value),
          reps: toInt(repsInput?.value),
          weight: toInt(weightInput?.value),
        };
      };

      const upsertRow = async (row, index) => {
        const payload = getRowData(row, index);
        const { error } = await supabase
          .from("workout_entries")
          .upsert(payload, { onConflict: "day,exercise_index" });
        if (error) console.warn("Supabase save failed", error);
      };

      const timers = new Map();
      rows.forEach((row, index) => {
        row.querySelectorAll("input").forEach((input) => {
          input.addEventListener("input", () => {
            if (timers.has(index)) clearTimeout(timers.get(index));
            timers.set(index, setTimeout(() => upsertRow(row, index), 500));
          });
        });
      });

      (async () => {
        const { data, error } = await supabase
          .from("workout_entries")
          .select("*")
          .eq("day", day)
          .order("exercise_index");
        if (error) {
          console.warn("Supabase load failed", error);
          return;
        }
        data.forEach((item) => {
          const row = rows[item.exercise_index - 1];
          if (!row) return;
          const nameInput = row.querySelector(".exercise-name");
          const noteInput = row.querySelector(".exercise-note");
          const setsInput = row.querySelector('input[name^="sets-"]');
          const repsInput = row.querySelector('input[name^="reps-"]');
          const weightInput = row.querySelector('input[name^="gewicht-"]');

          if (nameInput && item.exercise_name != null) nameInput.value = item.exercise_name;
          if (noteInput && item.note != null) noteInput.value = item.note;
          const toggle = row.querySelector(".complete-toggle");
          if (toggle) toggle.checked = Boolean(item.completed);
          if (setsInput && item.sets != null) setsInput.value = item.sets;
          if (repsInput && item.reps != null) repsInput.value = item.reps;
          if (weightInput && item.weight != null) weightInput.value = item.weight;
        });
      })();
    })();
  </script>

</body>
</html>
